<div style="background: #ffffff; border: 1px solid #3366cc; border-radius: 12px; padding: 24px; max-width: 700px; margin: 0 auto; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">

  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px; background: #f8f9fa; padding: 12px 16px; border-radius: 40px; border-left: 5px solid #3366cc;">
    <span style="background: #3366cc; color: white; border-radius: 20px; padding: 4px 14px; font-weight: 500; font-size: 14px;">—Ö–∞—Ä—å–∫–æ–≤ –º–æ–≤–∞</span>
    <span style="color: #202122;">–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥</span>
  </div>

  <label style="font-weight: 500; color: #202122; display: block; margin-bottom: 6px;">–≤–≤–æ–¥ (—Ä—É—Å/—É–∫—Ä/—Å–≤–æ–π):</label>
  <input
    id="inputText"
    type="text"
    placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –ª—Ä–∏–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
    value="–ª—Ä–∏–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
    style="width: 100%; padding: 14px 18px; font-size: 16px; border: 2px solid #3366cc; border-radius: 40px; margin-bottom: 20px; background: white; outline: none;"
  />

  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
    <span style="color: #202122; font-weight: 600;">üëá –∞—à—Ç–∏–º–ª+ –ø–µ—Ä–µ–≤–æ–¥:</span>
    <span style="font-size: 13px; background: #eaf3ff; padding: 4px 12px; border-radius: 30px; color: #3366cc;">–æ–Ω–ª–∞–π–Ω</span>
  </div>

  <div
    id="output"
    style="background: #f8f9fa; border: 2px solid #a2a9b1; border-radius: 18px; padding: 18px; min-height: 80px; font-size: 18px; color: #000; white-space: pre-wrap; word-break: break-word;"
  >‚è≥ –ø–µ—Ä–µ–≤–æ–¥...</div>

  <div style="font-size: 13px; color: #3366cc; margin-top: 16px; display: flex; gap: 20px; flex-wrap: wrap; background: #f0f6ff; padding: 10px 16px; border-radius: 30px;">
    <span>‚úÖ –ª—Ä–∏–µ—Ç ‚Üí –ª—Ä–∏–µ—Ç (–±–µ–∑ "–Ω—É")</span>
    <span>‚úÖ –ø—Ä–ø–≤—Ç ‚Üí –ø—Ä–ø–≤—Ç</span>
    <span>‚úÖ –µ–∞—Ç—å ‚Üí –µ–∞—Ç—å</span>
    <span>‚úÖ –∞—á–æ—á–æ? ‚Üí –∞—á–æ—á–æ? üíÄ</span>
  </div>
</div>

<script>
  function translateKharkov(text) {
    if (!text.trim()) return '';

    // –ò—Å–∫–ª—é—á–µ–Ω–∏—è (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤, —Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω)
    const exceptions = new Set(['–ª—Ä–∏–µ—Ç', '–ø—Ä–ø–≤—Ç', '–µ–∞—Ç—å', '—É–¥–æ–ª–∏', '–ø—Ä–∫–∞', '–∞—á–æ—á–æ', '–∞–∫–∞–∫']);

    // —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è: —Å–ª–æ–≤–∞ + –ø—Ä–æ–±–µ–ª—ã + –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è
    const tokens = text.split(/(\s+|[,.!?;:]+)/).filter(Boolean);
    let result = [];
    let isFirstWord = true;

    for (let token of tokens) {
      // –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–±–µ–ª –∏–ª–∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º
      if (/^\s+$/.test(token) || /^[,.!?;:]+$/.test(token)) {
        result.push(token);
        continue;
      }

      // –æ—Ç–¥–µ–ª—è–µ–º —Å–ª–æ–≤–æ –æ—Ç –ø—Ä–∏–ª–µ–≥–∞—é—â–µ–π –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ (–Ω–∞ –≤—Å—è–∫–∏–π)
      let word = token;
      let tailPunct = '';
      const punctMatch = word.match(/^(.+?)([,.!?;:]*)$/);
      if (punctMatch) {
        word = punctMatch[1];
        tailPunct = punctMatch[2];
      }

      const lowerWord = word.toLowerCase();
      const isException = exceptions.has(lowerWord);

      let processedWord = word;

      if (!isException) {
        // —à -> —â
        processedWord = processedWord.replace(/—à/g, '—â').replace(/–®/g, '–©');
        // —É–±–∏—Ä–∞–µ–º '–æ' –≤ –∫–æ–Ω—Ü–µ
        if (processedWord.toLowerCase().endsWith('–æ')) {
          processedWord = processedWord.slice(0, -1);
        }
      }

      // –¥–æ–±–∞–≤–ª—è–µ–º "–Ω—É" —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–Ω–∞—á–∞—â–∏–º —Å–ª–æ–≤–æ–º, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
      if (isFirstWord) {
        if (isException) {
          // –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: —Å–∞–º–æ —Å–ª–æ–≤–æ –±–µ–∑ "–Ω—É"
          result.push(processedWord + tailPunct);
        } else {
          result.push('–Ω—É ' + processedWord + tailPunct);
        }
        isFirstWord = false;
      } else {
        result.push(processedWord + tailPunct);
      }
    }

    let finalText = result.join('');

    // –æ–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω—É–∂–µ–Ω –ª–∏ üíÄ –∏–ª–∏ )
    const trimmed = finalText.trim();
    if (trimmed === '') return finalText;

    const hasQuestionMark = finalText.includes('?');
    const hasExclamation = finalText.includes('!');
    // –≥—Ä—É–±–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å/–æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ
    const looksLikeQuestion = /(–∫–∞–∫|–≥–¥–µ|–ø–æ—á–µ–º—É|–∑–∞—á–µ–º|—á—Ç–æ|–∫—Ç–æ|–∫–æ–≥–¥–∞|—Å–∫–æ–ª—å–∫–æ|–∞—á–æ—á–æ|–∞–∫–∞–∫)/i.test(finalText) && !finalText.includes('?') ? true : false;
    const looksLikeNegative = /–Ω–µ |–Ω–µ—Ç|–Ω–∏—á–µ–≥–æ|–Ω–∏–∫–∞–∫/i.test(finalText);

    // —É–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤–æ–∑–º–æ–∂–Ω—ã–π —ç–º–æ–¥–∑–∏ –∏–ª–∏ —Å–∫–æ–±–∫—É –≤ –∫–æ–Ω—Ü–µ (—á—Ç–æ–± –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å)
    finalText = finalText.replace(/[üíÄ\)\s]+$/, '').trim();

    if (hasQuestionMark || looksLikeQuestion || looksLikeNegative) {
      finalText += ' üíÄ';
    } else {
      finalText += ' )';
    }

    return finalText;
  }

  const input = document.getElementById('inputText');
  const output = document.getElementById('output');

  function update() {
    output.textContent = translateKharkov(input.value);
  }

  input.addEventListener('input', update);
  window.addEventListener('load', update);
</script>

<style>
  /* –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ–ª–∫–∏–π —à—Ä–∏—Ñ—Ç */
  .wiki-note {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 8px 16px;
    margin-top: 24px;
    font-size: 13px;
    color: #202122;
    border: 1px solid #c8ccd1;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }
</style>

<div class="wiki-note">
  ‚ö° <strong>—Ç–µ—Å—Ç:</strong> ¬´–ª—Ä–∏–µ—Ç, –µ–∞—Ç—å, –ø—Ä–ø–≤—Ç, –∞–∫–∞–∫ –¥–µ–ª–∞?¬ª ‚Üí ¬´–ª—Ä–∏–µ—Ç, –µ–∞—Ç—å, –ø—Ä–ø–≤—Ç, –∞–∫–∞–∫ –¥–µ–ª–∞? üíÄ¬ª (–≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, "–Ω—É" –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è, –±—É–∫–≤—ã –Ω–µ –º–µ–Ω—è—é—Ç—Å—è)